name: Reproduce false positive SIGSEGVs with Arm Fortran compiler (armflang)

on:
  workflow_dispatch:


jobs:

  test:
    name: Run armflang tests
    runs-on: ubuntu-24.04-arm
    continue-on-error: true
    strategy:
      fail-fast: false
      matrix:
        modify: [false, true]  # Whether to modify lincob.f90 to remove the is_finite check
        flag: [O0, O1]  # Optimization flags to test

    steps:

      - name: Clone Repository (Latest)
        uses: actions/checkout@v6.0.1

      - name: Install Arm Toolchain for Linux
        run: bash ./install_atfl

      - name: Conduct the test
        run: |
          bash ./sa ${{ matrix.modify }} ${{ matrix.flag }}
